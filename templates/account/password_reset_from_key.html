{% extends "base.html" %}

{% block title %}Change Password{% endblock %}

{% block content %}
<div class="glass-container !max-w-[400px] mt-6 mb-20">
    <h2 class="text-center mb-8 text-2xl font-bold">Change Password</h2>

    <form class="space-y-6" method="POST" action="{{ action_url }}">
        {% csrf_token %}

        {% if form.errors %}
        <div class="text-red-500 mb-4 p-3 bg-red-500/10 rounded-lg text-sm border border-red-500/20">
            {% for field in form %}
            {% for error in field.errors %}
            <p>{{ error }}</p>
            {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
            <p>{{ error }}</p>
            {% endfor %}
        </div>
        {% endif %}

        {% if token_fail %}
        <p class="text-center text-red-500 mb-6">The password reset link was invalid, possibly because it has already
            been used. Please request a new password reset.</p>
        <div class="text-center">
            <a href="{% url 'account_reset_password' %}" class="btn inline-block">Request New Reset</a>
        </div>
        {% else %}
        {% include "account/snippets/password_fields.html" %}

        <button class="btn w-full mt-2" type="submit">Change Password</button>
        {% endif %}
    </form>
</div>
{% endblock %}